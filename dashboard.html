<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard - Items Zoho Inventory</title>
</head>
<body>
  <h2>Items de Zoho Inventory</h2>
  <pre id="result">Cargando...</pre>

  <script>
    const accessToken = localStorage.getItem("zoho_access_token");
    const orgId = "873616335";

    if (!accessToken) {
      document.getElementById("result").textContent = "Token no encontrado. Por favor inicia sesiÃ³n primero.";
    } else {
      fetch("https://inventory.zoho.com/api/v1/items", {
        method: "GET",
        headers: {
          "Authorization": `Zoho-oauthtoken ${accessToken}`,
          "X-com-zoho-inventory-organizationid": orgId
        }
      })
      .then(res => res.json())
      .then(data => {
        if (data && data.items) {
          document.getElementById("result").textContent = JSON.stringify(data.items, null, 2);
        } else {
          document.getElementById("result").textContent = "Error en respuesta:\n" + JSON.stringify(data, null, 2);
        }
      })
      .catch(error => {
        document.getElementById("result").textContent = "Error al obtener items: " + error;
      });
    }
  </script>
</body>
</html>
